<div class="container">
    <h1>Felhasználók</h1>
    <hr>
<table class="table table-hover">
    <thead>
        <tr>
            <th class="text-end">#</th>
            <th class="text-end">Név</th>
            <th class="text-end">Email</th>
            <th class="text-end">Jogosultság</th>
            <th class="text-end">Létrehozva</th>
            <th class="text-end">Utoljára bejelntkezett</th>
            <th class="text-end">Státusz</th>
            <th class="text-end">Műveletek</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let user of pagedUser; let i = index" [ngClass]="{'inactive': !user.status}">
            <td class="text-end">{{user.id}}</td>
            <td class="text-end">{{user.name}}</td>
            <td class="text-end">{{user.email}}</td>
            <td class="text-end">{{user.role}}</td>
            <td class="text-end">{{user.createdAt}}</td>
            <td class="text-end">{{user.latestLogin}}</td>
            <td class="text-end">{{user.status ? "Aktív" : "Inaktív"}}</td>
            <td class="text-end">
                <!--<button *ngIf="user.status == false" class="btn" data-bs-toggle="modal" data-bs-target="#infoModal" style="color: cyan;" (click)="getUser(user.id)"><i class="bi bi-info-circle-fill"></i></button>--->
                <button class="btn" data-bs-toggle="modal" data-bs-target="#formModal" style="color: red;" (click)="getUser(user.id)"><i class="bi bi-ban"></i></button>
            </td>
        </tr>
    </tbody>
</table>
<hr>

<nav aria-label="Page navigation example" *ngIf="totalPages > 1">
  <ul class="pagination">
    <li class="page-item">
      <a class="page-link"  aria-label="Previous" (click)="setPage(currentPage-1)" [class.disabled]="currentPage == 1">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>

      <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index">
        <a class="page-link" (click)="setPage(i + 1)"  [class.active]="currentPage == i + 1">{{i + 1}}</a>
      </li>

    <li class="page-item">
      <a class="page-link"  aria-label="Next" (click)="setPage(currentPage+1)" [class.disabled]="currentPage == totalPages">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>

</nav>
</div>




<!--form modal-->
<div class="modal fade modal-lg" id="formModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="formModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="formModalLabel" *ngIf="Users[0].status==true">Biztosan ki szeretnéd bannolni a(z) {{Users[0].name}} nevű felhasználót?</h1>
        <h1 class="modal-title fs-5" id="formModalLabel" *ngIf="Users[0].status==false">Biztosan vissza akarod engedni a(z) {{Users[0].name}} nevű felhasználót?</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <p class="banAktiv" *ngIf="Users[0].status == true"><b class="nev">{{Users[0].name}}</b> nem lesz képes aktívan használni az oldalt amíg arra nem jogosítsák ismét!<br>Ennek tudatában is ki szeretnéd tiltani?
        </p>
        

        <p class="banAktiv" *ngIf="Users[0].status == false"><b class="nev">{{Users[0].name}}</b> ismételten hozzá fog férni az oldal összes funkciójához. Biztos ezt akarod?</p>
        <hr>
        <p class="banlistazas">
            <table class="table table-hover table-striped">
                <thead>
                    <tr>
                        <th class="text-end">Létrehozta:</th>
                        <th class="text-end">Utoljára belépett:</th>
                        <th class="text-end">Jogosultságai:</th>
                        <th class="text-end">Jelenlegi állapota</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="text-end">{{Users[0].createdAt}}</td>
                        <td class="text-end">{{Users[0].latestLogin}}</td>
                        <td class="text-end">{{Users[0].role}}</td>
                        <td class="text-end">{{Users[0].status ? "Aktív" : "Bannolva"}}</td>
                    </tr>
                </tbody>
            </table>
            <hr>
                    <div class="form-floating mb-3">
                    <input class="form-control textarea" id="banReason" placeholder="Leírás" [(ngModel)]="Users[0].banMessage">
                    <label for="banReason">Indok</label>
      </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="getUsers()">Mégsem</button>
        <button type="button" class="btn btn-success" (click)="banUser(Users[0].id)">Igen</button>
      </div>
    </div>
  </div>
</div>


<!--info modal-->
<div class="modal fade modal-lg" id="infoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <h1>Indok</h1>
      <p>{{Users[0].banMessage}}</p>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="getUsers()">Mégsem</button>
        <button type="button" class="btn btn-success" (click)="banUser(Users[0].id)">Igen</button>
      </div>
    </div>
  </div>
</div>
